{{define "users/new.html"}}
<h2>Create New User</h2>

{{if .Error}}
<div style="color: red; margin-bottom: 10px;">
    Error: {{.Error}}
</div>
{{end}}

<form method="POST" action="/users">
    <div style="margin-bottom: 10px;">
        <label for="name">Name:</label><br>
        <input type="text" id="name" name="name" value="{{if .FormData}}{{.FormData.Name}}{{end}}" required style="width: 300px; padding: 5px;">
    </div>
    
    <div style="margin-bottom: 10px;">
        <label for="OrganizationID">Organization:</label><br>
        <select id="OrganizationID" name="OrganizationID" required style="width: 310px; padding: 5px;" onchange="filterJobs()">
            <option value="">Select an Organization</option>
            {{ range .Organizations }}
        <option value="{{ .ID }}">{{ .Name }}</option>
        {{ end }}
        </select>
    </div>
    
    <div style="margin-bottom: 10px;">
        <label for="JobID">Job:</label><br>
        <select id="JobID" name="JobID" style="width: 310px; padding: 5px;">
            <option value="">Select a Job (optional)</option>
           {{ range .Jobs }}
        <option value="{{ .ID }}">{{ .Name }}</option>
        {{ end }}
        </select>
    </div>
    
    <div>
        <button type="submit">Create</button>
        <a href="/users">Cancel</a>
    </div>
</form>
{{end}}